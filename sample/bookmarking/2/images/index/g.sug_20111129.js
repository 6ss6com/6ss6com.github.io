(function(F,C,P){String.trim||(String.prototype.trim=function(){var $=this,$=$.replace(/^\s\s*/,""),_=/\s/,A=$.length;while(_.test($.charAt(--A)));return $.slice(0,A+1)});String.replaceTpl||(String.prototype.replaceTpl=function($){return this.replace(/#\{([^}]*)\}/mg,function(A,_){return A=$[_.trim()]})});String.htmlEncode||(String.prototype.htmlEncode=function(){return String(this).replace(/\x26/g,"&amp;").replace(/\x3c/g,"&lt;").replace(/\x3E/g,"&gt;").replace(/\x22/g,"&quot;").replace(/\x27/g,"&#39;").replace(/\xA9/g,"&copy;")});var M=" ",H=null,D=document.documentElement.classList!==P,Q=/\w/.test("\u0130"),A=Q&&!F.XMLHttpRequest,B=C.documentMode&&C.documentMode===9,I=function(_){if(!_)return;var $=_.split("."),C=$.length,B=window,D=0,A;if(C>1)for(;D<C-1;D++){A=$[D];B=(0===D&&B[A])?B[A]:A in B?B[A]:B[A]={}}return B},J=D?function(_,$){return _.classList.contains($)}:function(_,$){return-1<(M+_.className+M).indexOf(M+$+M)},_=D?function(_,$){_.classList.add($)}:function(_,$){if(!J(_,$))_.className+=(_.className?M:"")+$},K=D?function(_,$){_.classList.remove($)}:function(_,$){if(!J(_,$))return;var A=new RegExp("(\\s|^)"+$+"(\\s|$)");_.className=_.className.replace(A,M)},L=C.addEventListener?function($,A,_){$.addEventListener(A,_,!1)}:function($,A,_){$.attachEvent("on"+A,_)},O=function($,A,_){L($,A,function($){$=$||F.event;var A=$.srcElement||$.target;_.call(A,$)})},E=Q?function(_,$){$=$.replace(/\-(\w)/g,function(_,$){return $.toUpperCase()});return _.currentStyle[$]}:function(_,$){return C.defaultView.getComputedStyle(_,null).getPropertyValue($)},$=function(A,B){if(!(this instanceof $))return new $(A,B);var _=this;_.el=A+""===A?C.getElementById(A):A;if(!_.el)return;_.o={classNameWrap:B.classNameWrap||"sug-wrap",classNameQuery:B.classNameQuery,classNameQueryNull:B.classNameQueryNull,classNameSelect:B.classNameSelect||"sug-select",classNameClose:B.classNameClose||"sug-close",classNameShim:B.classNameShim||"sug-shim",locAbs:B.locAbs||false,pressDelay:B.pressDelay===P?3:B.pressDelay,autoFocus:B.autoFocus||false,delay:B.delay||200,n:B.n||10,t:B.t||true,autoCompleteData:B.autoCompleteData||false,url:B.url||false,charset:B.charset,callbackFn:B.callbackFn||false,callbackName:B.callbackName||false,callbackDataKey:B.callbackDataKey||false,callbackDataNum:B.callbackDataNum||false,requestQuery:B.requestQuery||false,requestParas:B.requestParas||{},noSubmit:B.noSubmit||false,onSelect:B.onSelect,onShow:B.onShow,onHide:B.onHide,onRequest:B.onRequest,onSucess:B.onSucess,onError:B.onError,customUrl:B.customUrl||false,templ:B.templ||false};_.wrap=_.el.parentNode;_.init()},N=$.prototype;N.init=function(){var A=this,C=A.o;A.layoutInit();A.reset();A.inputHandle();C.autoFocus&&setTimeout(function(){A.el.focus()},16);if(C.autoCompleteData)return;var D=C.callbackFn,B=I(D,true),$=D.split("."),_=$.pop();A.callback=function($){$=$||{};var _=arguments.callee;A=D&&_.repeat?_.context||A:A;A.o.onSucess&&A.o.onSucess.call(A);var C=A.o.callbackDataKey||A.o.callbackDataNum,B=C?$[C]:$;if(!B||!B.length){A.hide(1);A.isHide=false;return}A.fill($,A.q);A.show();A.cache[A.q]=$};if(B[_])B[_].repeat=true;else if(D)B[_]=A.callback};N.reset=function(_){var $=this,A;for(A in _)$.o[A]=_[A];$.cache={};$.q="";$.s=H;$.i=-1;$.subType=-1;$.inputTimer();$.isHide=false;$.hide(1)};N.layoutInit=function(){var D=this,G=D.o,B=G.locAbs?C.body:D.wrap,$=D.sugWrap=C.createElement("div");D.el.setAttribute("autocomplete","off");if(A){var F=D.shim=$.appendChild(C.createElement("iframe"));F.src="about:blank";_(F,G.classNameShim);F.frameBorder=0;F.scrolling="no";D.content=$.appendChild($.cloneNode(null))}else D.content=$;_($,G.classNameWrap);!G.locAbs&&E(B,"position")==="static"&&(B.style.position="relative");B.appendChild($)};N.show=function(){this.sugWrap.style.display="";this.o.onShow&&this.o.onShow.call(this)};N.hide=function(_){var $=this;$.sugWrap.style.display="none";$.q=$.el.value;if(_!=2){$.s=H;$.i=-1}_==1&&$.fill();$.o.onHide&&$.o.onHide.call($)};N.holdFocus=function(_,$){if($.preventDefault)$.preventDefault();else _.onbeforedeactivate=function(){F.event.returnValue=false;_.onbeforedeactivate=null}};N.inputTimer=function(C){var $=this,A=$.el,_=$.t,B;if(C){if(_)return;$.t=setInterval(function(){B=A.value;if(!B.trim()){$.hide(1);$.q=B;return}if(B!==$.q)$.updata(B)},$.o.delay)}else{_&&clearInterval($.t);$.t=0}};N.getIndex=function($,A){var _=A.length;while(_--)if(A[_]===$)return _;return-1};N.matchEl=function(_,$,A){while(_!==$){if(A.call(_))return _;_=_.parentNode}return H};N.submitForm=function(){var $=this.el.form;if($.onsubmit)$.onsubmit();else $.submit()};N.keydownMove=function(L){var B=this,J=B.sugWrap.getElementsByTagName("OL")[0];if(!J)return;if(B.isHide){B.isHide=false;return}var I=J.getElementsByTagName("LI"),G=I.length,D=B.el,C=B.s,F=B.o,A=F.classNameSelect,E=B.q||"",$;if(C){K(C,A);B.i=B.getIndex(C,I);B.s=H}B.i===P&&(B.index=-1);B.i!==-1&&K(I[B.i],A);if(L===40)B.i++;else if(L===38)B.i--;if(B.i===-2)B.i=G-1;else if(B.i===G){D.value=E;B.i=-1}else if(B.i===-1)D.value=E;if(B.i!==-1&&B.i!==G){$=I[B.i];_($,A);!F.autoCompleteData&&(D.value=$.getAttribute("q"));B.s=$}};N.inputHandle=function(){var B=this,F=B.o,D=B.el,C=D.form,A=B.sugWrap,$=F.classNameSelect,H=F.autoCompleteData,E=0,G;D.onkeydown=function($){$=$||window.event;G=$.keyCode;if(G===27){B.hide(2);A.getElementsByTagName("ol")[0]&&(B.isHide=true);!H&&(D.value=B.q);B.inputTimer();return false}else if(G>32&&G<41){if(!D.value&&A.style.display==="none")D.blur();else if(G===40||G===38){if(!F.pressDelay||E++===0){B.isHide&&B.show();B.keydownMove(G);B.inputTimer()}else if(E===F.pressDelay)E=0;!Q&&$.preventDefault()}}else if(G===13){B.inputTimer();B.hide(2);F.onSelect&&F.onSelect.call(B);if(H){D.value=B.s?B.s.getAttribute("q"):"";return false}B.subType=2;if(F.noSubmit)return false}else if(G>8&&G<19){G!==9&&B.holdFocus(D,$);return}else B.inputTimer(1)};L(D,"keyup",function(){E=0});L(D,"blur",function(){B.hide(2);A.getElementsByTagName("ol")[0]&&(B.isHide=true);B.inputTimer()});O(A,"mouseover",function(){var C=B.matchEl(this,A,function(){return this.tagName==="LI"});if(!C)return;B.s&&K(B.s,$);_(C,$);B.s=C});O(A,"mouseout",function(){var _=B.matchEl(this,A,function(){return this.tagName==="LI"});this.tagName==="LI"&&this!==_&&K(_,$)});L(A,"mousedown",function($){B.inputTimer();B.holdFocus(D,$)});O(A,"mouseup",function(_){B.subType=3;var C=A.getElementsByTagName("OL")[0],$;if(!C||_.which&&_.which>2||_.button&&(_.button!==1&&_.button!==4))return;J(this,F.classNameClose)&&B.hide();$=B.matchEl(this,A,function(){return this.tagName==="LI"});if(!$)return;D.value=$.getAttribute("q");B.hide();B.inputTimer();B.i=B.getIndex($,C.getElementsByTagName("LI"));F.onSelect&&F.onSelect.call(B);!F.autoCompleteData&&!F.noSubmit&&B.submitForm()})};N.fill=function(B,A){var _=this,$=_.content;if(arguments.length<2){$.innerHTML="";return}var C=_.o,D=C.templ,F=C.classNameQueryNull,E=C.classNameQuery;this.content.innerHTML=D?D.call(_,B,A):function(){B=B[C.callbackDataKey||C.callbackDataNum]||[];var G=0,D=Math.min(B.length,C.n),_=[],$;A=A.trim();for(;G<D;G++){$=B[G];$!==P&&_.push('<li q="'+$+'"'+(F&&$.indexOf(A)>-1?"":" class="+F)+">"+(E?$.replace(A,'<span class="'+E+'">'+A+"</span>"):$)+"</li>")}return"<ol>"+_.join("")+"</ol>"}()};N.updata=function(_){var $=this,A=$.o.autoCompleteData||$.cache[_];$.q=_;$.i=-1;$.isHide=false;if(A!==P){$.fill(A,_);$.show();return}$.request(_)};N.request=function(R){var O=this,E=O.o,L=E.callbackFn,V=E.callbackName,F=E.onSucess,_=E.onError,A=E.onRequest,T=O.callback,J=E.url,U=E.customUrl,K=E.requestParas,$=[],G,M;if(L){var S=I(L),D=L.split(".").pop();S[D]=O.callback;if(S[D].repeat)S[D].context=O}else if(V){M=O.script;if(M.readyState)M.onreadystatechange=function(){if(M.readyState=="loaded"||M.readyState=="complete"){M.onreadystatechange=H;F&&F.call(O);T(V)}};else M.onload=function(){F&&F.call(O);T(V)}}_&&(O.script.onerror=function(){_.call(O)});if(!O.script||!Q||B){var N=C.getElementsByTagName("script")[0];M=C.createElement("script");M.type="text/javascript";M.async=true;if(O.script)N.parentNode.replaceChild(M,O.script);else N.parentNode.insertBefore(M,N);O.script=M}A&&A.call(this);K=function(){for(G in K)((M=K[G])!==P)&&$.push(G+"="+K[G]);E.t&&$.push("t"+"="+ +new Date);return $.join("&")}();O.script.charset=E.charset?E.charset:"";O.script.src=U&&U.call(O,K)||J+"?"+E.requestQuery+"="+encodeURIComponent(R)+"&"+K};F.G||(F.G={}),G.suggest=G.sug=$})(window,document)