function lYearDays(e){var t,n=348;for(t=32768;t>8;t>>=1)n+=lunarInfo[e-1900]&t?1:0;return n+leapDays(e)}function leapDays(e){return leapMonth(e)?lunarInfo[e-1900]&65536?30:29:0}function leapMonth(e){return lunarInfo[e-1900]&15}function monthDays(e,t){return lunarInfo[e-1900]&65536>>t?30:29}function Lunar(e){var t,n=0,r=0,i=new Date(1900,0,31),s=(e-i)/864e5;this.dayCyl=s+40,this.monCyl=14;for(t=1900;t<2050&&s>0;t++)r=lYearDays(t),s-=r,this.monCyl+=12;s<0&&(s+=r,t--,this.monCyl-=12),this.year=t,this.yearCyl=t-1864,n=leapMonth(t),this.isLeap=!1;for(t=1;t<13&&s>0;t++)n>0&&t==n+1&&this.isLeap==0?(--t,this.isLeap=!0,r=leapDays(this.year)):r=monthDays(this.year,t),this.isLeap==1&&t==n+1&&(this.isLeap=!1),s-=r,this.isLeap==0&&this.monCyl++;s==0&&n>0&&t==n+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--t,--this.monCyl)),s<0&&(s+=r,--t,--this.monCyl),this.month=t,this.day=s+1}function solarDays(e,t){return t==1?e%4==0&&e%100!=0||e%400==0?29:28:solarMonth[t]}function cyclical(e){return Gan[e%10]+Zhi[e%12]}function calElement(e,t,n,r,i,s,o,u,a,f,l){this.isToday=!1,this.sYear=e,this.sMonth=t,this.sDay=n,this.week=r,this.lYear=i,this.lMonth=s,this.lDay=o,this.isLeap=u,this.cYear=a,this.cMonth=f,this.cDay=l,this.color="",this.lunarFestival="",this.solarFestival="",this.solarTerms=""}function sTerm(e,t){var n=new Date(31556925974.7*(e-1900)+sTermInfo[t]*6e4+Date.UTC(1900,0,6,2,5));return n.getUTCDate()}function calendar(e,t){var n,r,i,s,o=1,u,a=0,f,l,c=new Array(3),h=0,p=0;n=new Date(e,t,1),this.length=solarDays(e,t),this.firstWeek=n.getDay();for(var d=0;d<this.length;d++)o>a&&(n=new Date(e,t,d+1),r=new Lunar(n),i=r.year,s=r.month,o=r.day,u=r.isLeap,a=u?leapDays(i):monthDays(i,s),h==0&&(p=s),c[h++]=d-o+1),this[d]=new calElement(e,t+1,d+1,nStr1[(d+this.firstWeek)%7],i,s,o++,u,cyclical(r.yearCyl),cyclical(r.monCyl),cyclical(r.dayCyl++)),(d+this.firstWeek)%7==0&&(this[d].color="red"),(d+this.firstWeek)%14==13&&(this[d].color="red");f=sTerm(e,t*2)-1,l=sTerm(e,t*2+1)-1,this[f].solarTerms=solarTerm[t*2],this[l].solarTerms=solarTerm[t*2+1],t==3&&(this[f].color="red"),e==tY&&t==tM&&(this[tD-1].isToday=!0)}function cDay(e){var t;switch(e){case 10:t="初十";break;case 20:t="二十";break;case 30:t="三十";break;default:t=nStr2[Math.floor(e/10)],t+=nStr1[e%10]}return t}var lunarInfo=new Array(19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423);lunarInfo=lunarInfo.concat([27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600]),lunarInfo=lunarInfo.concat([51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448]);var solarMonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Gan=new Array,Zhi=new Array,Animals=new Array,solarTerm=new Array("小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"),sTermInfo=new Array(0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758),nStr1=new Array("日","一","二","三","四","五","六","七","八","九","十","十一","腊"),nStr2=new Array("初","十","廿","卅","　"),monthName=new Array,cld,Today=new Date,tY=Today.getFullYear(),tM=Today.getMonth(),tD=Today.getDate();cld=new calendar(tY,tM);(function(){var d=tD-1;var festival="  "+cld[d].solarTerms+" "+cld[d].solarFestival+" "+cld[d].lunarFestival;var time="今天是&nbsp;"+cld[d].sYear+"年"+cld[d].sMonth+"月"+cld[d].sDay+"日&nbsp;&nbsp;星期"+cld[d].week+"&nbsp;&nbsp;"+(cld[d].isLeap?"闰 ":"")+nStr1[cld[d].lMonth]+"月"+cDay(cld[d].lDay)+" "+festival;$j("#clockb").html(time);})();